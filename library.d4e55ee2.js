var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var i=n("2shzp"),s=n("6VKYe");s=n("6VKYe");const l=document.querySelector(".library-list"),o=document.querySelector(".backdrop"),r=document.querySelector(".modal");let d="";async function c(e){try{const{data:t}=await i.default.get(`https://api.themoviedb.org/3/movie/${e}?api_key=9e4f0ad78cbe1148a9d4c0c8389afc83&language=en-US`);return t}catch(e){console.log(e.message)}}async function u(e){const t=document.querySelector(".js-watchedBtn"),a=e.target.dataset.id,n=JSON.parse(localStorage.getItem("addToWatched")).find((e=>e.id===Number(a)));if(console.log("watched status",n),n){t.textContent="ADD TO WATCHED";const e=JSON.parse(localStorage.getItem("addToWatched")).filter((e=>e.id!==Number(a)));localStorage.setItem("addToWatched",JSON.stringify(e))}else{t.textContent="REMOVE FROM WATCHED";const e=JSON.parse(localStorage.getItem("addToWatched")),n=await c(a),i={poster:n.poster_path,title:n.original_title?n.original_title:n.title,genreList:n.genres.map((e=>e.name)).join(", "),releaseDate:n.release_date.slice(0,4),id:n.id};e.push(i),localStorage.setItem("addToWatched",JSON.stringify(e))}s.refs.watchedBtn.classList.add("active"),s.refs.queueBtn.classList.remove("active"),location.reload()}async function g(e){const t=document.querySelector(".js-queueBtn"),a=e.target.dataset.id;if(JSON.parse(localStorage.getItem("addToQueue")).find((e=>e.id===Number(a)))){t.textContent="ADD TO QUEUE";const e=JSON.parse(localStorage.getItem("addToQueue")).filter((e=>e.id!==Number(a)));localStorage.setItem("addToQueue",JSON.stringify(e))}else{t.textContent="REMOVE FROM QUEUE";const e=JSON.parse(localStorage.getItem("addToQueue")),n=await c(a),i={poster:n.poster_path,title:n.original_title?n.original_title:n.title,genreList:n.genres.map((e=>e.name)).join(", "),releaseDate:n.release_date.slice(0,4),id:n.id};e.push(i),localStorage.setItem("addToQueue",JSON.stringify(e))}s.refs.watchedBtn.classList.add("active"),s.refs.queueBtn.classList.remove("active"),location.reload()}function m(){o.classList.add("visually-hidden"),r.innerHTML="",d=""}l.addEventListener("click",(async function(e){const t=function(e){if(e.preventDefault(),e.currentTarget===e.target)return;const t=e.target.closest("li");return t.dataset.id}(e),a=await c(t),n=localStorage.getItem("addToWatched"),i=localStorage.getItem("addToQueue"),s=JSON.parse(n).find((e=>e.id===Number(t))),l=JSON.parse(i).find((e=>e.id===Number(t)));!function(e,t,a){r.innerHTML="",o.classList.remove("visually-hidden");const{poster_path:n,original_title:i,name:s,vote_average:l,vote_count:c,popularity:u,genres:g,release_date:m="",first_air_date:p="",overview:v,id:f}=e,h=i||s,y=(m?m.slice(0,4):p.slice(0,4),g.map((e=>e.name)).join(", "));d=`\n   <button type="button" class="modal-close" data-modal-close>\n    <svg\n      width="30"\n      height="30"\n      viewBox="0 0 30 30"\n      fill="none"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <path d="M8 8L22 22" stroke="black" stroke-width="2" />\n      <path d="M8 22L22 8" stroke="black" stroke-width="2" />\n    </svg>\n  </button>\n  <div class="modal-poster"><img\n      class="img-film"\n      src="https://image.tmdb.org/t/p/original/${n}"\n      alt=""\n    />\n  </div>\n  <div class="modal-description">\n    <h2 class="modal-title">${h}</h2>\n    <div class="data-wrapper">\n      <div class="data-keys">\n        <ul class="keys-list">\n          <li class="keys-item">Vote / Votes</li>\n          <li class="keys-item">Popularity</li>\n          <li class="keys-item">Original Title</li>\n          <li class="keys-item">Genre</li>\n        </ul>\n      </div>\n      <div class="data-values">\n        <ul class="values-list">\n          <li class="value-item">\n            <span class="rating">${l}</span>/<span class="votes">${c}</span>\n          </li>\n          <li class="value-item popularity">${u}</li>\n          <li class="value-item movie-title">${h}</li>\n          <li class="value-item movie-genres">${y}</li>\n        </ul>\n      </div>\n    </div>\n    <h2 class="about-film">ABOUT</h2>\n    <p class="description-film-info">${v} \n    </p>\n    <div class="btn-block">\n      <button type="button" class="modal-button js-watchedBtn" data-id='${f}'>${t}</button>\n      <button type="button" class="modal-button js-queueBtn" data-id='${f}'>${a}</button>\n    </div>\n  </div>`,r.insertAdjacentHTML("afterbegin",d)}(a,s?"REMOVE FROM WATCHED":"ADD TO WATCHED",l?"REMOVE FROM QUEUE":"ADD TO QUEUE");document.querySelector(".modal-close").addEventListener("click",m),document.addEventListener("keydown",(e=>{27===e.keyCode&&m()})),o.addEventListener("click",(e=>{e.target===e.currentTarget&&m()}));const p=document.querySelector(".js-watchedBtn"),v=document.querySelector(".js-queueBtn");p.addEventListener("click",u),v.addEventListener("click",g)}));
//# sourceMappingURL=library.d4e55ee2.js.map
